# Claude Code Context Compact ë¬¸ì œ - ì‹¤ì „ ê°œë°œì ë…¸í•˜ìš° (2025ë…„ 10ì›” ìµœì‹ )

> GitHub ì´ìŠˆ 3,871ê±´ê³¼ ì‹¤ì œ ì‚¬ìš©ì ê²½í—˜ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ëœ ì‹¤ì „ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì‹¬ê°í•œ ë²„ê·¸ë“¤](#-í˜„ì¬-ì§„í–‰-ì¤‘ì¸-ì‹¬ê°í•œ-ë²„ê·¸ë“¤-2025ë…„-10ì›”)
2. [ì‹¤ì „ ê°œë°œìë“¤ì˜ ê²€ì¦ëœ ë…¸í•˜ìš°](#-ì‹¤ì „-ê°œë°œìë“¤ì˜-ê²€ì¦ëœ-ë…¸í•˜ìš°)
3. [ê°œë°œìë“¤ì´ ë°œê²¬í•œ ìˆ˜ì¹˜](#-ê°œë°œìë“¤ì´-ë°œê²¬í•œ-ìˆ˜ì¹˜)
4. [2025ë…„ ìµœì‹  Workaround](#ï¸-2025ë…„-ìµœì‹ -workaround)
5. [ì‹¤ì „ ì›Œí¬í”Œë¡œìš°](#-ì‹¤ì „-ì›Œí¬í”Œë¡œìš°-ê²€ì¦ë¨)
6. [í”¼í•´ì•¼ í•  ì•ˆí‹°íŒ¨í„´](#ï¸-í”¼í•´ì•¼-í• -ì•ˆí‹°íŒ¨í„´)
7. [ì»¤ë®¤ë‹ˆí‹° í•©ì˜ëœ ê³¨ë“  ë£°](#-ì»¤ë®¤ë‹ˆí‹°-í•©ì˜ëœ-ê³¨ë“ -ë£°)

---

## ğŸ”¥ í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ì‹¬ê°í•œ ë²„ê·¸ë“¤ (2025ë…„ 10ì›”)

### 1. **ë¬´í•œ ì••ì¶• ë£¨í”„** ([#6004](https://github.com/anthropics/claude-code/issues/6004))
- **ì¦ìƒ**: Contextê°€ 4-6%ì— ë„ë‹¬í•˜ë©´ ë¬´í•œ compaction ë£¨í”„ì— ë¹ ì§
- **ì˜í–¥**: Claude Codeê°€ ì‚¬ì‹¤ìƒ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•œ ìƒíƒœê°€ ë¨
- **ê²°ê³¼**: API ì‘ë‹µ ì‹¤íŒ¨ë¡œ ì´ì–´ì§

### 2. **Compaction í›„ ê¸°ì–µìƒì‹¤**
- **ì¦ìƒ**: Compaction í›„ Claudeê°€ "ë©ì²­í•´ì§" (ì‹¤ì œ ê°œë°œì í‘œí˜„)
- **ë¬¸ì œì **:
  - ì´ì „ì— ì½ì—ˆë˜ íŒŒì¼ì„ ê¸°ì–µ ëª» í•´ì„œ ë‹¤ì‹œ ì½ì–´ì•¼ í•¨
  - ì´ë¯¸ ê³ ì¹œ ì‹¤ìˆ˜ë¥¼ ë˜ ë°˜ë³µí•¨
  - ì‘ì—… íš¨ìœ¨ì„± ê¸‰ê²©íˆ ì €í•˜

### 3. **.claude/project-context.md ì‚­ì œ** ([#9796](https://github.com/anthropics/claude-code/issues/9796))
- **ë³´ê³ ì¼**: 2025ë…„ 10ì›” 17ì¼
- **ì¦ìƒ**: Context compactionì´ í”„ë¡œì íŠ¸ ì§€ì‹œì‚¬í•­ì„ ì‚­ì œí•´ë²„ë¦¼
- **ìƒíƒœ**: ì•„ì§ ë¯¸í•´ê²°

### 4. **Autonomous Mode ì¤‘ë‹¨** ([#10301](https://github.com/anthropics/claude-code/issues/10301))
- **ë³´ê³ ì¼**: 2025ë…„ 10ì›” 25ì¼
- **ì¦ìƒ**: Compaction í›„ ììœ¨ ëª¨ë“œê°€ ì‘ë™ ì¤‘ë‹¨
- **ìƒíƒœ**: ì•„ì§ ë¯¸í•´ê²°

---

## ğŸ’¡ ì‹¤ì „ ê°œë°œìë“¤ì˜ ê²€ì¦ëœ ë…¸í•˜ìš°

### 1. **Auto-Compact ë„ê³  ìˆ˜ë™ ê´€ë¦¬** â­â­â­

**íš¨ê³¼:**
```
45k í† í° â†’ 176k í† í°ìœ¼ë¡œ 88.1% í™•ë³´
```

**ì™œ íš¨ê³¼ì ì¸ê°€:**
- Auto-compact ë²„í¼ê°€ ì´ì „ ì„¸ì…˜ì˜ ì“¸ëª¨ì—†ëŠ” contextë¥¼ ê³„ì† ë³´ê´€í•¨
- ë¹„í™œì„±í™”í•˜ë©´ ì¦‰ì‹œ ìˆ˜ë§Œ í† í° í™•ë³´
- í•„ìš”í•  ë•Œ `/compact`ë¡œ ìˆ˜ë™ ì‹¤í–‰

**ì „ëµì  ìˆ˜ë™ compaction:**
```bash
# íŠ¹ì • ì •ë³´ë§Œ ë³´ì¡´
/compact only keep the names of the websites we reviewed

# ì½”ë”© íŒ¨í„´ ë³´ì¡´
/compact preserve the coding patterns we established
```

---

### 2. **/clearë¥¼ ê·¼ìœ¡ ê¸°ì–µìœ¼ë¡œ** â­â­â­

**íŒ¨í„´:**
```
1-3 ë©”ì‹œì§€ë§ˆë‹¤ /clear ì‹¤í–‰
```

**ì‹¤ì œ ì‚¬ìš© íŒ¨í„´:**
- ì‘ì€ ì‘ì—… ë‹¨ìœ„ë¡œ ìª¼ê°œê¸°
- ê° ì‘ì—… ì™„ë£Œ í›„ ì¦‰ì‹œ /clear
- ëª‡ ë¶„ë§ˆë‹¤ ì‹¤í–‰í•˜ëŠ” ìŠµê´€ ë“¤ì´ê¸°

**ì˜ˆì‹œ:**
```bash
# ì‘ì—… 1: ë¡œê·¸ì¸ ë²„ê·¸ ìˆ˜ì •
"Fix login bug"
# ... ì‘ì—… ì™„ë£Œ ...
/clear

# ì‘ì—… 2: ì‚¬ìš©ì í”„ë¡œí•„ í˜ì´ì§€ ì¶”ê°€
"Add user profile page"
# ... ì‘ì—… ì™„ë£Œ ...
/clear
```

---

### 3. **/contextë¡œ 70% ë£°** â­â­

**ëª…ë ¹ì–´:**
```bash
/context  # í˜„ì¬ ìƒíƒœ í™•ì¸
```

**í–‰ë™ ê¸°ì¤€:**
- **70%**: ì£¼ì˜ - context ì •ë¦¬ ê³ ë ¤
- **80%**: ê²½ê³  - ìƒˆ ì„¸ì…˜ ì‹œì‘ ê¶Œì¥  
- **90%**: ìœ„í—˜ - ì¦‰ì‹œ /clear ë˜ëŠ” ìƒˆ ì„¸ì…˜

**ëª¨ë‹ˆí„°ë§ ì •ë³´:**
- í˜„ì¬ í† í° ì‚¬ìš©ëŸ‰
- MCP ì„œë²„ë³„ í† í° ì†Œë¹„
- ë¡œë“œëœ ë©”ëª¨ë¦¬ íŒŒì¼ (CLAUDE.md)
- Tool í˜¸ì¶œ ì¶”ì 

---

### 4. **MCP ì„œë²„ ë‹¤ì´ì–´íŠ¸** â­â­

**ë¬¸ì œ:**
```
ê° MCP ì„œë²„: 4-10k í† í° ì†Œë¹„ (ì•„ë¬´ê²ƒë„ ì•ˆ í•´ë„)
```

**ì‹¤í–‰ ë°©ë²•:**
1. `/context`ë¡œ MCP ì„œë²„ í† í° ì‚¬ìš©ëŸ‰ í™•ì¸
2. í˜„ì¬ ì‘ì—…ì— ë¶ˆí•„ìš”í•œ ì„œë²„ ë¹„í™œì„±í™”
3. í•„ìš”í•  ë•Œë§Œ ì¬í™œì„±í™”

**ì˜ˆì‹œ:**
- PDF ì‘ì—… ì¤‘ â†’ GitHub MCP ë¹„í™œì„±í™”
- ì½”ë”© ì¤‘ â†’ Context7 ë¬¸ì„œ MCP ë¹„í™œì„±í™”

---

### 5. **CLAUDE.md ìµœì í™”** â­â­â­

**ìµœì  ê¸¸ì´:**
```
100-200ì¤„
ì´ˆê³¼ ì‹œ: í•˜ìœ„ í´ë”ë³„ CLAUDE.mdë¡œ ë¶„ì‚°
```

**êµ¬ì¡°í™” ì „ëµ:**
```
./CLAUDE.md              # í”„ë¡œì íŠ¸ ì „ì²´ (100-200ì¤„)
â”œâ”€â”€ src/CLAUDE.md        # src íŠ¹í™” ì§€ì¹¨
â”œâ”€â”€ docs/CLAUDE.md       # ë¬¸ì„œ ì‘ì—… ì§€ì¹¨
â””â”€â”€ tests/CLAUDE.md      # í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì§€ì¹¨
```

**ì‘ì„± ì›ì¹™:**
- **êµ¬ì²´ì ìœ¼ë¡œ**: "2-space indentation" > "Format code properly"
- **êµ¬ì¡°í™”**: Markdown í—¤ë”©ìœ¼ë¡œ ì„¹ì…˜ êµ¬ë¶„
- **ì •ê¸° ë¦¬ë·°**: í”„ë¡œì íŠ¸ ì§„í™”ì— ë§ì¶° ì—…ë°ì´íŠ¸

---

### 6. **ê³„íšê³¼ ì‹¤í–‰ ë¶„ë¦¬** â­

**ê³„íš ë‹¨ê³„ (ì½ê¸° ì „ìš©):**
```bash
claude --permission-mode plan  # ë˜ëŠ” Shift+Tab
```

**ì‹¤í–‰ ë‹¨ê³„:**
```bash
claude  # ì¼ë°˜ ëª¨ë“œë¡œ ìˆ˜ì • ì‘ì—…
```

**ì¥ì :**
- íƒìƒ‰ ë‹¨ê³„ì—ì„œ ë¶ˆí•„ìš”í•œ context ì†Œë¹„ ë°©ì§€
- ì „ì²´ êµ¬ì¡° íŒŒì•… í›„ íš¨ìœ¨ì  ì‹¤í–‰

---

### 7. **ë¹„ìƒ íƒˆì¶œ ì „ëµ**

**ë ˆë²¨ 1: ìˆ˜ë™ Compact**
```bash
/compact preserve [ì¤‘ìš”í•œ ê²ƒ]
```

**ë ˆë²¨ 2: Clear**
```bash
/clear  # Context ì™„ì „ ì´ˆê¸°í™”
```

**ë ˆë²¨ 3: ìƒˆ ì„¸ì…˜**
```bash
/quit
claude  # ì™„ì „ ìƒˆ ì‹œì‘
```

---

## ğŸ“Š ê°œë°œìë“¤ì´ ë°œê²¬í•œ ìˆ˜ì¹˜

| í•­ëª© | ìˆ˜ì¹˜ | ì¶œì²˜ |
|------|------|------|
| Auto-compact ë²„í¼ | 45k í† í° (22.5%) | ì‹¤ì œ ì¸¡ì • |
| MCP ì„œë²„ë‹¹ ì†Œë¹„ | 4-10k í† í° | /context ë¶„ì„ |
| CLAUDE.md ìµœì  ê¸¸ì´ | 100-200ì¤„ | ì»¤ë®¤ë‹ˆí‹° í•©ì˜ |
| Context ê²½ê³ ì„  | 70% | ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ |
| /clear ê¶Œì¥ ì£¼ê¸° | 1-3 ë©”ì‹œì§€ | ìˆ™ë ¨ ê°œë°œì |
| ë³µì¡í•œ ì‘ì—… ì¤‘ë‹¨ì„  | 80% | ê³µì‹ ê¶Œì¥ |

---

## ğŸ› ï¸ 2025ë…„ ìµœì‹  Workaround

### Issue #6689: Auto-compact ë¹„í™œì„±í™” ê¸°ëŠ¥ ìš”ì²­
- **í˜„ì¬ ìƒíƒœ**: ì§„í–‰ ì¤‘, ê³µì‹ ì§€ì› ì—†ìŒ  
- **ì„ì‹œ í•´ê²°**: ìˆ˜ë™ compactionë§Œ ì‚¬ìš©
- **ë§í¬**: https://github.com/anthropics/claude-code/issues/6689

### Issue #7530: Compaction ì—ëŸ¬ (81ê°œ ëŒ“ê¸€!)
- **í•´ê²°ì±…ë“¤**:
  1. MCP ì„œë²„ ì „ë¶€ ë„ê³  í…ŒìŠ¤íŠ¸
  2. CLAUDE.md í¬ê¸° ì¤„ì´ê¸°
  3. /clear í›„ ì¬ì‹œì‘
- **ë§í¬**: https://github.com/anthropics/claude-code/issues/7530

### Issue #2705: ì„ íƒì  Context Compaction
- **ê°œë°œìë“¤ì˜ ìš”êµ¬**:
  - ì¤‘ìš”í•œ íŒŒì¼/ëŒ€í™”ë§Œ ë³´ì¡´
  - ë¶ˆí•„ìš”í•œ command output ìë™ ì œê±°
  - Fine-grained control
- **ë§í¬**: https://github.com/anthropics/claude-code/issues/2705

---

## ğŸ¯ ì‹¤ì „ ì›Œí¬í”Œë¡œìš° (ê²€ì¦ë¨)

```bash
# 1. ì„¸ì…˜ ì‹œì‘
claude
/context  # ì´ˆê¸° ìƒíƒœ í™•ì¸

# 2. ì‘ì—… (ì‘ì€ ë‹¨ìœ„)
"Fix login bug"
# ... ì‘ì—… ì™„ë£Œ ...
/clear

# 3. ë‹¤ìŒ ì‘ì—…
"Add user profile page"
# ... ì‘ì—… ì™„ë£Œ ...
/clear

# 4. 70% ë„ë‹¬ ì‹œ
/context
# ë¶ˆí•„ìš”í•œ MCP ì„œë²„ ë¹„í™œì„±í™”
# ë˜ëŠ” ìƒˆ ì„¸ì…˜ ì‹œì‘

# 5. Compaction í•„ìš” ì‹œ (ìˆ˜ë™)
/compact preserve the API patterns we established

# 6. ì™„ì „íˆ ë§‰í˜”ì„ ë•Œ
/quit
claude  # ìƒˆ ì‹œì‘
```

---

## âš ï¸ í”¼í•´ì•¼ í•  ì•ˆí‹°íŒ¨í„´

1. **âŒ Auto-compact ë¯¿ê¸°**  
   â†’ Compaction loopì— ë¹ ì ¸ ì‘ì—… ë¶ˆê°€ëŠ¥

2. **âŒ Context 90%ê¹Œì§€ ì‚¬ìš©**  
   â†’ API ì—ëŸ¬ë¡œ ì‘ì—… ì¤‘ë‹¨

3. **âŒ ëª¨ë“  MCP ì„œë²„ í™œì„±í™”**  
   â†’ ë¶ˆí•„ìš”í•œ í† í° ë‚­ë¹„ (ì„œë²„ë‹¹ 4-10k)

4. **âŒ CLAUDE.md 500ì¤„ ì´ìƒ**  
   â†’ Context ì••ë°• ë° ìë™ ë¡œë“œ ë¶€ë‹´

5. **âŒ /clear ì—†ì´ ì¥ì‹œê°„ ì‘ì—…**  
   â†’ í’ˆì§ˆ ì €í•˜ ë° ê´€ë ¨ ì—†ëŠ” ì •ë³´ ëˆ„ì 

6. **âŒ ì—ëŸ¬ ë¡œê·¸ ë°©ì¹˜**  
   â†’ ì“¸ëª¨ì—†ëŠ” command outputì´ context ì°¨ì§€

---

## ğŸ”® ì»¤ë®¤ë‹ˆí‹° í•©ì˜ëœ "ê³¨ë“  ë£°"

> **"ContextëŠ” ì–‘ì´ ì•„ë‹ˆë¼ ì§ˆì´ë‹¤"**  
>   
> - 10% contextë¼ë„ ì“¸ëª¨ì—†ëŠ” ë‚´ìš©ì´ë©´ ê²°ê³¼ë¬¼ì´ ì—‰ë§  
> - 80% contextë¼ë„ ê´€ë ¨ ìˆëŠ” ë‚´ìš©ì´ë©´ ì™„ë²½í•œ ê²°ê³¼  
>   
> **í•µì‹¬**: ê´€ë ¨ì„± ë†’ì€ ì •ë³´ë§Œ ìœ ì§€í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ê³¼ê°íˆ ì œê±°

---

## ğŸ“š ì°¸ê³  ìë£Œ

### GitHub Issues
- [#6004 - Infinite Compaction Loop](https://github.com/anthropics/claude-code/issues/6004)
- [#9796 - Context compaction erases project-context.md](https://github.com/anthropics/claude-code/issues/9796)
- [#10301 - Autonomous mode stops after compaction](https://github.com/anthropics/claude-code/issues/10301)
- [#6689 - Feature Request: Disable auto-compact](https://github.com/anthropics/claude-code/issues/6689)
- [#7530 - Compaction Error (81 comments)](https://github.com/anthropics/claude-code/issues/7530)

### ë¸”ë¡œê·¸ ë° ë¬¸ì„œ
- Medium: "Claude Code Context Management" by Kushal Banda
- Steve Kinney's Course: AI Development - Claude Code Compaction
- DoltHub Blog: "Claude Code Gotchas"
- Anthropic Engineering: "Claude Code Best Practices"

---

**ì‘ì„±ì¼**: 2025ë…„ 10ì›” 31ì¼  
**ê¸°ë°˜ ë°ì´í„°**: GitHub Issues 3,871ê±´ + ì‹¤ì œ ê°œë°œì ë¸”ë¡œê·¸ 10+ ê°œ  
**ì¡°ì‚¬ ë²”ìœ„**: 2025ë…„ 6ì›” ~ 10ì›” ìµœì‹  ì´ìŠˆ ë° ì»¤ë®¤ë‹ˆí‹° í”¼ë“œë°±

---

## ğŸ¤ ê¸°ì—¬

ì´ ë¬¸ì„œëŠ” ì‹¤ì œ ì‚¬ìš©ì ê²½í—˜ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.  
ì¶”ê°€ ë…¸í•˜ìš°ë‚˜ ì—…ë°ì´íŠ¸ ì‚¬í•­ì´ ìˆë‹¤ë©´ ì´ìŠˆë‚˜ PRë¡œ ê³µìœ í•´ì£¼ì„¸ìš”!
